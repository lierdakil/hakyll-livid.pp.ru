---
author: Livid
date: 2008-12-20 08:30:50+00:00
title: man
wordpress_id: 161
tags: BASh, Gentoo, Koi8, man, UTF8 ,BASh, Gentoo, patch
...

Пока не вышел новый стабильный Debian, я сижу на Gentoo.
И недавно обнаружил преинтересный баг (или фичу): большая часть
переведенных на русский манов живет в кодировке Koi8-R. А я хочу UTF-8
консоль. И маны в ней не отображаются.
Посему пришлось изобретать велосипед. Благо, определения в man.conf
разрешают перенаправления вывода.

<!--more-->


В результате получаса раздумий родился патч:

```patch
96c96
< NROFF         /usr/bin/nroff -mandoc
---
> NROFF         /usr/bin/nroff -mandoc -Tlatin1 | iconv -f koi8-r
```


Это простое изменение, как ни странно, работает нормально, маны
отображаются в "родной" системной кодировке.
Возможно вопрос можно было решить изящнее, с удовольствием узнаю, как
оно делается gentoo-way.
